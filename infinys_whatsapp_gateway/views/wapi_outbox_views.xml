<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_infinys_wapi_outbox_tree" model="ir.ui.view">
        <field name="name">infinys.wapi.outbox.list</field>
        <field name="model">infinys.wapi.outbox</field>
        <field name="arch" type="xml">
            <list string="WAPI Outbox" decoration-muted="not is_queued and not is_delivered" decoration-success="is_delivered" decoration-warning="is_queued">
                <field name="create_date" string="Created"/>
                <field name="phone"/>
                <field name="name"/>
                <field name="is_queued"/>
                <field name="is_delivered"/>
                <field name="sent_date"/>
                <field name="hasmedia"/>
                <field name="media_filename"/>
            </list>
        </field>
    </record>

    <record id="view_infinys_wapi_outbox_form" model="ir.ui.view">
        <field name="name">infinys.wapi.outbox.form</field>
        <field name="model">infinys.wapi.outbox</field>
        <field name="arch" type="xml">
            <form string="WAPI Message">
                <header>
                    <button name="send_message" string="Send" type="object" class="oe_highlight" invisible="not is_queued"/>
                    <button name="send_message_immediate" string="Send Immediate" type="object" class="oe_highlight" invisible="not is_queued"/>
                </header>
                <sheet>
                    <group>
                        <group name="main_info">
                            <field name="name"/>
                            <field name="phone" widget="phone" options="{'enable_sms': True}"/>
                            <field name="attachment_id" widget="many2many_binary" options="{'accepted_file_extensions': 'image/jpeg, image/png, image/gif,video/mp4, video/3gp, application/pdf, application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.presentationml.presentation', 'number_of_files': 1}" />
                            <field name="scheduled_date"/>
                        </group>
                        <group name="status_info">
                            <field name="is_queued"/>
                            <field name="is_delivered"/>
                            <field name="sent_date" readonly="1"/>
                        </group>
                        <group name="extra_info">
                            <field name="module_name"/>
                            <field name="note"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Content" name="content">
                            <group>
                                <field name="message"/>
                            </group>
                        </page>
                        <page string="Media" name="media" invisible="not hasmedia">
                            <group>
                                
                                <field name="hasmedia" readonly="1"/>
                                <field name="media_url" readonly="1"/>
                                <field name="media_filename" readonly="1"/>
                                <field name="media_mime_type" readonly="1"/>    
                            </group>
                            <group>
                                <field name="media_base64"></field>
                            </group>
                        </page>
                        <page string="Technical Details" name="technical">
                            <group>
                                <field name="error_msg" invisible="not error_msg"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_infinys_wapi_outbox" model="ir.actions.act_window">
        <field name="name">WhatsApp Outbox</field>
        <field name="res_model">infinys.wapi.outbox</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No messages in the outbox.
            </p>
        </field>
    </record>

    <menuitem id="menu_infinys_wapi_outbox"
              name="WhatsApp Outbox Logs"
              action="action_infinys_wapi_outbox"
              parent="base.menu_automation"
              sequence="20"/>

</odoo>